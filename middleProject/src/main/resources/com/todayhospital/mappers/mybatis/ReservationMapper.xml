<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.todayhospital.mappers.ReservationMapper">
    <!-- [ReservationMapper.xml 포함 테이블 정의] -->
    <!--
        본 매퍼는 '예약 도메인' 기능을 전담하며, 예약 등록, 조회, 변경, 취소, 중복 검사 등을 수행합니다.
        환자/병원/의료진 간 자원 및 시간의 상호 충돌 없이 관리되는 예약 프로세스를 보장하기 위한 구조임.

        [포함 테이블 및 역할 설명]

        1. RESERVATION
            - 예약 등록, 수정, 삭제, 상세 조회
            - 예약 상태(RESV_STATUS), 예약 일시(RESV_DATE), 진료 항목 등 포함
            - 환자(PATIENT_ID) 및 병원/의료진 정보(FK) 기반 예약 데이터 유지

        2. RESERVATION_HISTORY
            - 예약 변경 이력 또는 취소 이력 저장
            - 상태 변경 시 과거 기록 보존 (ex. 취소 사유, 변경 전 시간 등)

        3. MEDICAL_SCHEDULE (읽기 전용 연계)
            - 예약 가능 시간/의료진 정보 확인 시 사용
            - 병원/의료진 스케줄과 예약의 충돌 여부 판단

        ※ 예약 가능 시간 조회는 HospitalMapper의 스케줄 제공 기능과 협업
        ※ 환자 본인의 예약 조회는 Controller에서 권한 필터링하여 본 매퍼 호출
        ※ 예약 시도/오류 등은 SystemLogMapper에 로그 기록 위임
        ※ 본 매퍼는 예약 로직의 일관성 및 중복 방지를 우선 고려함

        → 예약 기능 관련 로직은 타 매퍼로 분산하지 않고 본 매퍼에 집중시켜 관리 일관성 확보
    -->

</mapper>
