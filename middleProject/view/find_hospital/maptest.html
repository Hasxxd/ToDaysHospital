<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ëŒ€ì „ ë³‘ì› ì§€ë„</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Pretendard í°íŠ¸ -->
  <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet">
  <!-- ë„¤ì´ë²„ ì§€ë„ API -->
  <script type="text/javascript" src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpKeyId=oqxhiinnqp&submodules=geocoder"></script>

  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Pretendard', 'Malgun Gothic', sans-serif;
      background-color: #f4f7f9;
      color: #333;
    }

    .container {
      max-width: 1100px;
      margin: 0 auto;
      padding: 40px 20px;
      position: relative;
    }

    header {
      text-align: center;
      margin-bottom: 30px;
    }

    header img {
      width: 140px;
      margin-bottom: 10px;
    }

    header h2 {
      font-size: 2rem;
      color: #2c3e50;
      margin: 0;
    }

    .category-buttons {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 12px;
      margin-bottom: 25px;
    }

    .category-buttons button {
      background-color: #ffffff;
      border: 2px solid #007bff;
      color: #007bff;
      padding: 12px 24px;
      font-size: 1rem;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s ease-in-out;
    }

    .category-buttons button.active,
    .category-buttons button:hover {
      background-color: #007bff;
      color: white;
      box-shadow: 0 2px 8px rgba(0, 123, 255, 0.2);
    }

    #map {
      width: 100%;
      height: 600px;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
      border: 1px solid #e0e0e0;
    }

    .location-button {
      position: absolute;
      top: 105px;
      right: 20px;
      z-index: 1000;
      background-color: #28a745;
      color: white;
      padding: 12px 18px;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
      box-shadow: 0 2px 10px rgba(0,0,0,0.15);
    }

    .location-button:hover {
      background-color: #218838;
    }

    @media (max-width: 600px) {
      .category-buttons button {
        flex: 1 1 100%;
      }

      header h2 {
        font-size: 1.5rem;
      }

      .location-button {
        top: 160px;
        right: 10px;
        padding: 10px 14px;
        font-size: 0.9rem;
      }
    }
  </style>
</head>
<body>

  <div class="container">
    <header>
      <a href="../home/home.html">
      <img src="../../images/logo_img.png" alt="ë¡œê³  ì´ë¯¸ì§€"> </a>
      <h2>ëŒ€ì „ ë³‘ì› ì§€ë„</h2>
    </header>

    <!-- ì¹´í…Œê³ ë¦¬ ë²„íŠ¼ -->
    <div class="category-buttons">
      <button onclick="filterCategory('ì •í˜•ì™¸ê³¼', this)">ì •í˜•ì™¸ê³¼</button>
      <button onclick="filterCategory('ë‚´ê³¼', this)">ë‚´ê³¼</button>
      <button onclick="filterCategory('ì´ë¹„ì¸í›„ê³¼', this)">ì´ë¹„ì¸í›„ê³¼</button>
    </div>

    <!-- ë‚´ ìœ„ì¹˜ ë²„íŠ¼ -->
    <button onclick="moveToMyLocation()" class="location-button">ë‚´ ìœ„ì¹˜</button>

    <!-- ì§€ë„ -->
    <div id="map"></div>
  </div>

  <script>
    const map = new naver.maps.Map("map", {
      center: new naver.maps.LatLng(36.3504, 127.3845), // ëŒ€ì „ ì¤‘ì‹¬
      zoom: 14
    });

    let markers = [];

    const hospitalData = [
      { name: "íŠ¼íŠ¼ ì •í˜•ì™¸ê³¼", category: "ì •í˜•ì™¸ê³¼", lat: 36.3501, lng: 127.3850, info: "ëŒ€ì „ ì¤‘êµ¬ ì¤‘ì•™ë¡œ 123" },
      { name: "íŠ¼íŠ¼ ë‚´ê³¼", category: "ë‚´ê³¼", lat: 36.3522, lng: 127.3865, info: "ëŒ€ì „ ì„œêµ¬ ë‘”ì‚°ë¡œ 45" },
      { name: "ê·€ì½”ëª© ì´ë¹„ì¸í›„ê³¼", category: "ì´ë¹„ì¸í›„ê³¼", lat: 36.3490, lng: 127.3820, info: "ëŒ€ì „ ìœ ì„±êµ¬ ë¬¸í™”ë¡œ 67" }
    ];

    function filterCategory(category, button) {
      clearMarkers();
      setActiveButton(button);

      const filtered = hospitalData.filter(h => h.category === category);

      filtered.forEach(hospital => {
        const position = new naver.maps.LatLng(hospital.lat, hospital.lng);

        const marker = new naver.maps.Marker({
          position,
          map,
          icon: {
            content: `<div style="font-size:24px; transform: rotate(180deg); color:#ff4757;">â¬‡ï¸</div>`,
            size: new naver.maps.Size(24, 24),
            anchor: new naver.maps.Point(12, 12)
          },
          title: hospital.name
        });

        const infoWindow = new naver.maps.InfoWindow({
          content: `<div style="padding:10px;">${hospital.name}</div>`
        });

        naver.maps.Event.addListener(marker, 'mouseover', () => infoWindow.open(map, marker));
        naver.maps.Event.addListener(marker, 'mouseout', () => infoWindow.close());
        naver.maps.Event.addListener(marker, 'click', () => {
          alert(`ğŸ¥ ${hospital.name}\nğŸ“ ${hospital.info}`);
        });

        markers.push(marker);
      });
    }

    function clearMarkers() {
      markers.forEach(marker => marker.setMap(null));
      markers = [];
    }

    function setActiveButton(button) {
      document.querySelectorAll('.category-buttons button').forEach(btn => btn.classList.remove('active'));
      if (button) button.classList.add('active');
    }

function moveToMyLocation() {
  // ë¸Œë¼ìš°ì €ê°€ Geolocation APIë¥¼ ì§€ì›í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.
  if (navigator.geolocation) {
    // ì‚¬ìš©ìì˜ í˜„ì¬ ìœ„ì¹˜ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
    navigator.geolocation.getCurrentPosition(function(position) {
      // ìœ„ì¹˜ ê°ì²´ì—ì„œ ìœ„ë„ì™€ ê²½ë„ë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤.
      const lat = position.coords.latitude;
      const lng = position.coords.longitude;

      // ì‚¬ìš©ìì˜ í˜„ì¬ ì¢Œí‘œë¡œ Naver Maps LatLng ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
      const myLocation = new naver.maps.LatLng(lat, lng);

      // ì§€ë„ì˜ ì¤‘ì‹¬ì„ ì‚¬ìš©ìì˜ í˜„ì¬ ìœ„ì¹˜ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.
      map.setCenter(myLocation);
      // ì§€ë„ì˜ í™•ëŒ€/ì¶•ì†Œ ë ˆë²¨ì„ ì„¤ì •í•©ë‹ˆë‹¤.
      map.setZoom(15);

      // ì‚¬ìš©ìì˜ ìœ„ì¹˜ë¥¼ í‘œì‹œí•˜ê¸° ìœ„í•œ ìƒˆë¡œìš´ Naver Maps ë§ˆì»¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
      new naver.maps.Marker({
        position: myLocation, // ë§ˆì»¤ì˜ ìœ„ì¹˜ë¥¼ ì‚¬ìš©ì ìœ„ì¹˜ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.
        map: map, // ë§ˆì»¤ë¥¼ ì§€ë„ ì¸ìŠ¤í„´ìŠ¤ì™€ ì—°ê²°í•©ë‹ˆë‹¤.
        icon: {
          // HTMLì„ ì‚¬ìš©í•˜ì—¬ ë§ˆì»¤ì˜ ì‚¬ìš©ì ì§€ì • ì•„ì´ì½˜ì„ ì •ì˜í•©ë‹ˆë‹¤ (ì´ëª¨ì§€).
          content: `<div style="font-size:24px; color:#28a745;">ğŸ§</div>`,
          size: new naver.maps.Size(24, 24), // ì‚¬ìš©ì ì§€ì • ì•„ì´ì½˜ì˜ í¬ê¸°ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
          anchor: new naver.maps.Point(12, 12) // ì•„ì´ì½˜ì˜ ì•µì»¤ í¬ì¸íŠ¸(ì¤‘ì‹¬)ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
        },
        title: "ë‚´ ìœ„ì¹˜" // ë§ˆì»¤ì˜ ì œëª©(íˆ´íŒ)ì„ ì„¤ì •í•©ë‹ˆë‹¤.
      });
    }, function() {
      // ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë° ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ ì´ í•¨ìˆ˜ê°€ í˜¸ì¶œë©ë‹ˆë‹¤.
      // ì‚¬ìš©ìì—ê²Œ ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ì§€ ëª»í–ˆìŒì„ ì•Œë¦½ë‹ˆë‹¤.
      alert("ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ìœ„ì¹˜ ì ‘ê·¼ì„ í—ˆìš©í•´ì£¼ì„¸ìš”.");
    });
  } else {
    // ë¸Œë¼ìš°ì €ê°€ Geolocationì„ ì§€ì›í•˜ì§€ ì•ŠëŠ” ê²½ìš° ì´ ë¸”ë¡ì´ ì‹¤í–‰ë©ë‹ˆë‹¤.
    // ì‚¬ìš©ìì—ê²Œ Geolocationì´ ì§€ì›ë˜ì§€ ì•ŠìŒì„ ì•Œë¦½ë‹ˆë‹¤.
    alert("ì´ ë¸Œë¼ìš°ì €ì—ì„œëŠ” ìœ„ì¹˜ ì •ë³´ ì‚¬ìš©ì´ ì§€ì›ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
  }
}

    // ì´ˆê¸° ë¡œë”© ì‹œ ì „ì²´ ë³‘ì› ëª©ë¡ ë³´ì—¬ì£¼ì§€ ì•Šê³  ëŒ€ì „ë§Œ í‘œì‹œ
    window.onload = function () {
      setActiveButton(null);
    };
  </script>

</body>
</html>
